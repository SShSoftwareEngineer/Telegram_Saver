<!-- Шаблон с опциями детальной информации сообщений базы данных -->

<style>
    .vertical-spread {
        margin-top: 15px;
    }
</style>

{# Конфигурация элементов управления формы #}
{% set form_cfg = form_btn_cfg.db_tag_buttons %}

<!-- Current message tag list -->
<label for="this_message_tags" class="group-label no-margin-top">Message Tags</label>
<div class="control-X-button">
    <select id="this_message_tags" name="this_message_tags" size="6"
            onchange="document.getElementById('edit_tag_name').value = this.options[this.selectedIndex].text">
        {% for db_dialog in db_all_dialog_list %}
            <option value="{{ db_dialog.title }}">{{ db_dialog.title }}</option>
        {% endfor %}
    </select>
    <button type="button"
            onclick="clearFormFields(['this_message_tags', 'edit_tag_name'])"
            class="clear-button X-button"> ✖
    </button>
</div>

<!-- Edit tag -->
<label for="edit_tag_name" class="group-label vertical-spread">Edit Tag Name</label>
<div class="control-X-button">
    <input type="text" id="edit_tag_name" name="edit_tag_name">
    <button type="button"
            onclick="clearFormFields(['edit_tag_name'])"
            class="clear-button X-button"> ✖
    </button>
</div>

<!-- Add a tag to a message -->
<button class="apply-filters-buttons vertical-spread"
        onclick="pressFormButton({{ form_btn_cfg.get_form_button_cfg(form_cfg) }}, '/db_tag_add')">
    Add tag
</button>

<!-- Remove tag -->
<button class="apply-filters-buttons vertical-spread"
        onclick="pressFormButton({{ form_btn_cfg.get_form_button_cfg(form_cfg) }}, '/db_tag_remove')">
    Remove tag
</button>

<!-- Update tag -->
<button class="apply-filters-buttons vertical-spread"
        onclick="pressFormButton({{ form_btn_cfg.get_form_button_cfg(form_cfg) }}, '/db_tag_update')">
    Update tag
</button>

<!-- Update all tags -->
<button class="apply-filters-buttons vertical-spread"
        onclick="pressFormButton({{ form_btn_cfg.get_form_button_cfg(form_cfg) }}, '/db_tag_update_everywhere')">
    Update tag everywhere
</button>

<!-- All tags sorting -->
<label for="all_tags_list" class="group-label vertical-spread">All tags</label>

<form hx-post="/db_all_tag_sorting" hx-trigger="change" hx-swap="none">
    <div>
        <input type="radio" id="db_tag_sort_field_0" name="db_tag_sort_field" value="0" checked>
        <label for="db_tag_sort_field_0">Sort by name</label>
        <input type="radio" id="db_tag_sort_field_1" name="db_tag_sort_field" value="1">
        <label for="db_tag_sort_field_1">Sort by usage count</label>
        <input type="radio" id="db_tag_sort_field_2" name="db_tag_sort_field" value="2">
        <label for="db_tag_sort_field_2">Sort by last update</label>
    </div>
</form>

<!-- All tags list -->
<div class="control-X-button vertical-spread">
    <select id="all_tags_list" name="all_tags_list" size="6"
            onchange="document.getElementById('edit_tag_name').value = this.options[this.selectedIndex].text">
        {% for db_dialog in db_all_dialog_list %}
            <option value="{{ db_all_tags.id }}">{{ db_all_tags.name }}</option>
        {% endfor %}
    </select>
    <button type="button"
            onclick="clearFormFields(['all_tags_list'])"
            class="clear-button X-button"> ✖
    </button>
</div>
