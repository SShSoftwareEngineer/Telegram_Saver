<!-- Шаблон для экспорта на накопитель сохраненного в БД сообщения Telegram -->

<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<head>
    <title>{{ message_date }} {{ dialog_title }}</title>
</head>
<body>
<div style="text-align: center;">
    {# Вывод даты сообщения #}
    <b>{{ message_date }}</b>
    {# Вывод начала названия диалога #}
    <span style="color: #777777">&nbsp;&nbsp;|&nbsp;&nbsp; {{ dialog_title|safe|truncate(constants.truncated_title_length) }}</span>
</div>
{# Вывод текста сообщения #}
{% if text %}
    <br>
    {{ text|replace('\n', '<br>')|safe }}
{% endif %}
{# Вывод графических, видео и других файлов #}
{% if files %}
    <br>
    <div class="media-files-area">
        {% for message_file in files %}
            <div class="{% if files|length>1 %} media-files-two-column {% else %} media-files-one-column {% endif %}">
                {# Вывод графических файлов #}
                {% if message_file.alt_text==tg_file_types.IMAGE.alt_text %}
                    <img class="media-files-container"
                         src="{{ message_file.file_name }}" alt="{{ message_file.alt_text }}">
                {% endif %}
                {# Вывод видео файлов #}
                {% if message_file.alt_text==tg_file_types.VIDEO.alt_text %}
                    <video class="media-files-container"
                           src="{{ message_file.file_name }}" controls preload="metadata">
                        Video is not supported by your browser
                    </video>
                {% endif %}
                {# Вывод имени файла #}
                <div class="media-file-name">
                    {{ message_file.file_name }}
                </div>
            </div>
        {% endfor %}
    </div>
{% endif %}

</body>
</html>