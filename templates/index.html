{#
Application home page.
Variables:
- chats_count: number of chats
#}


<!DOCTYPE html>
<html lang="en">

<head>
    <title>Telegram Saver</title>
    <meta charset="UTF-8">
    {# For mobile devices / Для мобильных устройств #}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {# Using style file / Подключение файла стилей #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>

<div class="main-container">

    {# Tab bar / Панель вкладок #}
    <div class="tabs">
        <button class="tab-button active" onclick="openTab(event, 'tab1')">Telegram</button>
        <button class="tab-button" onclick="openTab(event, 'tab2')">Database</button>
    </div>

    {# Content area container / Контейнер области контента #}
    <div class="content-area">

        {# Tab contents / Содержимое вкладок #}

        {# Telegram messages page / Страница сообщений Telegram #}
        <div id="tab1" class="tab-content" style="display: block;">
            <div class="tg-container-tab_1">
                <div class="header tg-filter_h">Filters</div>
                <div class="header tg-chat_h">Chats&nbsp;<span id="tg-chats-count">{{ chats_count }}</span></div>
                <div class="header tg-message_h">Messages&nbsp;<span id="tg-messages-count"></span></div>
                <div class="header tg-detail_h">Message Details</div>
                <div class="grid tg-filters">
                    {# Filters for Telegram chats and messages / Фильтры для диалогов и сообщений Telegram #}
                    <div>{% include "tg_dialog_filter.html" %}</div>
                    <div class="tg-filter-divider"></div>
                    <div>{% include "tg_message_filter.html" %}</div>
                </div>
                <div class="grid tg-save_to_db save_to_db_area_format">
                    {# Database maintenance button / Кнопка обслуживания базы данных#}
                    <button id="synchronize_files" class="button-in-cell"
                            onclick="callHandler('/db_database_maintenance')">
                        Database maintenance
                    </button>
                </div>
                <div class="tg-chats">
                    <div class="grid scroll" id="tg_dialogs">
                        {# Displaying the list of Telegram dialogs / Вывод списка диалогов Telegram #}
                        {% if tg_dialogs %}
                            {% include "tg_dialogs.html" %}
                        {% endif %}
                    </div>
                </div>
                <div class="grid">
                    {# Action bar above the list of Telegram message groups
                       Панель действий над списком групп сообщений Telegram #}
                    {% include "tg_action_bar.html" %}
                </div>
                <div class="tg-messages">
                    <div class="grid scroll" id="tg_messages">
                        {# Displaying a list of Telegram message groups / Вывод списка групп сообщений Telegram #}
                        {% if tg_messages %}
                            {% include "tg_messages.html" %}
                        {% endif %}
                    </div>
                </div>
                <div class="tg-details">
                    {# Details of selected Telegram message / Детали выбранного сообщения Telegram #}
                    <div class="grid scroll" id="tg_details">
                        {% if tg_details %}
                            {% include "tg_details.html" %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        {# Database messages page / Страница сообщений Database #}
        <div id="tab2" class="tab-content">
            <div class="db-container-tab_2">
                <div class="header db-filters_h"> Filters</div>
                <div class="header db-messages_h">Messages&nbsp;<span id="db-messages-count"></span></div>
                <div class="header db-details_h">Message details</div>
                <div class="header db-tags_h">Tags</div>
                <div class="grid db-filters">
                    {# Filters for messages from the database / Фильтры для сообщений из базы данных #}
                    {% include "db_filters.html" %}
                </div>
                <div class="grid db-action-bar">
                    {# Action bar above the list of message groups from the database
                       Панель действий над списком групп сообщений из базы данных #}
                    {% include "db_action_bar.html" %}
                </div>
                <div class="db-messages">
                    {# Displaying a list of message groups from the database / Вывод списка групп сообщений из базы данных #}
                    <div class="grid scroll" id="db_messages">
                        {% if db_messages %}
                            {% set context = db_messages %}
                            {% include "db_messages.html" with context %}
                        {% endif %}
                    </div>
                </div>
                <div class="db-details">
                    {# Details of the selected message from the database / Детали выбранного сообщения из базы данных #}
                    <div class="grid scroll" id="db_details">
                        {% if db_details %}
                            {% set context = db_details %}
                            {% include "db_details.html" with context %}
                        {% endif %}
                    </div>
                </div>
                <div class="grid db-tags">
                    {# Tag management for selected messages and the entire database
                       Управление тегами выбранного сообщения и всей базы данных #}
                    {% include "db_detail_tags.html" %}
                </div>
            </div>
        </div>

    </div>

    {# Status bar with custom CSSGrid / Строка статуса с собственным CSSGrid #}

    <div class="status-bar-grid">
        <div id="sb_operation" class="status-section">
            <strong>Operation: </strong>
        </div>
        <div class="status-section">
            <label for="sb_report"><strong>Report:</strong></label>
            <select id="sb_report" style="width: 100%;">
            </select>
        </div>
    </div>
</div>

{# Using a JavaScript function file / Подключение файла функций JavaScript #}
<script src="{{ url_for('static', filename='js/my_scripts.js') }}"></script>

</body>
</html>